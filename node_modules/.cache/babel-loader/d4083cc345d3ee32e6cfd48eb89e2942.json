{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { Types } from '../../utils/Types';\nimport { Fetch, Tools } from '../../utils/Tools';\nconst initialState = {\n  currencies: [],\n  loading: false,\n  in: 'UAH',\n  out: 'USD',\n  inValue: '1',\n  outValue: '',\n  coefficient: 0\n};\nexport const currencies = createSlice({\n  name: Types.CURRENCY,\n  initialState,\n  reducers: {\n    // change IN currency\n    changeInCur: (state, action) => {\n      state.in = action.payload;\n    },\n    // change OUT currency\n    changeOutCur: (state, action) => {\n      state.out = action.payload;\n    },\n    // change IN value\n    changeInValue: (state, action) => {\n      state.inValue = action.payload;\n    },\n    // change OUT value\n    changeOutValue: (state, action) => {\n      state.outValue = action.payload;\n    },\n    // when change coefficient do calculate in both ways\n    setCoefficient: state => {\n      state.coefficient = Tools.setCoefficient(state.currencies, state.in, state.out);\n      state.outValue = Tools.calculate(state.coefficient, state.inValue, state.outValue);\n      state.inValue = Tools.calculate(state.coefficient, state.inValue, state.outValue, true);\n    },\n    // calculate on straight way\n    calculateStraight: state => {\n      state.outValue = Tools.calculate(state.coefficient, state.inValue, state.outValue);\n    },\n    // calculate on reverse way\n    calculateReverse: state => {\n      state.inValue = Tools.calculate(state.coefficient, state.inValue, state.outValue, true);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(Fetch.getCurrency.pending, state => {\n      state.loading = true;\n    }).addCase(Fetch.getCurrency.fulfilled, (state, action) => {\n      state.currencies.push(action.payload);\n\n      if (state.currencies.length === Types.currencies.length) {\n        state.loading = false; // set coefficient and calculate on straight way\n\n        state.coefficient = Tools.setCoefficient(state.currencies, state.in, state.out);\n        state.outValue = Tools.calculate(state.coefficient, state.inValue, state.outValue);\n      }\n    });\n  }\n});\nexport const {\n  changeInCur,\n  changeOutCur,\n  changeInValue,\n  changeOutValue,\n  setCoefficient,\n  calculateStraight,\n  calculateReverse\n} = currencies.actions;\nexport default currencies.reducer;","map":{"version":3,"names":["createSlice","Types","Fetch","Tools","initialState","currencies","loading","in","out","inValue","outValue","coefficient","name","CURRENCY","reducers","changeInCur","state","action","payload","changeOutCur","changeInValue","changeOutValue","setCoefficient","calculate","calculateStraight","calculateReverse","extraReducers","builder","addCase","getCurrency","pending","fulfilled","push","length","actions","reducer"],"sources":["/Users/maxryaguzov/home_porjects/currency_converter/src/app/reducers/currencies.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { Types } from '../../utils/Types'\nimport { Fetch, Tools } from '../../utils/Tools'\n\nconst initialState: Types.CurrencyState = {\n\tcurrencies: [],\n\tloading: false,\n\tin: 'UAH',\n\tout: 'USD',\n\tinValue: '1',\n\toutValue: '',\n\tcoefficient: 0,\n}\n\nexport const currencies = createSlice({\n\tname: Types.CURRENCY,\n\tinitialState,\n\treducers: {\n\t\t// change IN currency\n\t\tchangeInCur: (\n\t\t\tstate,\n\t\t\taction: PayloadAction<Types.AvailableCurrencies>\n\t\t) => {\n\t\t\tstate.in = action.payload\n\t\t},\n\t\t// change OUT currency\n\t\tchangeOutCur: (\n\t\t\tstate,\n\t\t\taction: PayloadAction<Types.AvailableCurrencies>\n\t\t) => {\n\t\t\tstate.out = action.payload\n\t\t},\n\n\t\t// change IN value\n\t\tchangeInValue: (state, action: PayloadAction<string>) => {\n\t\t\tstate.inValue = action.payload\n\t\t},\n\t\t// change OUT value\n\t\tchangeOutValue: (state, action: PayloadAction<string>) => {\n\t\t\tstate.outValue = action.payload\n\t\t},\n\n\t\t// when change coefficient do calculate in both ways\n\t\tsetCoefficient: (state) => {\n\t\t\tstate.coefficient = Tools.setCoefficient(\n\t\t\t\tstate.currencies,\n\t\t\t\tstate.in,\n\t\t\t\tstate.out\n\t\t\t)\n\t\t\tstate.outValue = Tools.calculate(\n\t\t\t\tstate.coefficient,\n\t\t\t\tstate.inValue,\n\t\t\t\tstate.outValue\n\t\t\t)\n\t\t\tstate.inValue = Tools.calculate(\n\t\t\t\tstate.coefficient,\n\t\t\t\tstate.inValue,\n\t\t\t\tstate.outValue,\n\t\t\t\ttrue\n\t\t\t)\n\t\t},\n\n\t\t// calculate on straight way\n\t\tcalculateStraight: (state) => {\n\t\t\tstate.outValue = Tools.calculate(\n\t\t\t\tstate.coefficient,\n\t\t\t\tstate.inValue,\n\t\t\t\tstate.outValue\n\t\t\t)\n\t\t},\n\t\t// calculate on reverse way\n\t\tcalculateReverse: (state) => {\n\t\t\tstate.inValue = Tools.calculate(\n\t\t\t\tstate.coefficient,\n\t\t\t\tstate.inValue,\n\t\t\t\tstate.outValue,\n\t\t\t\ttrue\n\t\t\t)\n\t\t},\n\t},\n\textraReducers: (builder) => {\n\t\tbuilder\n\t\t\t.addCase(Fetch.getCurrency.pending, (state) => {\n\t\t\t\tstate.loading = true\n\t\t\t})\n\t\t\t.addCase(\n\t\t\t\tFetch.getCurrency.fulfilled,\n\t\t\t\t(state, action: PayloadAction<Types.Currency>) => {\n\t\t\t\t\tstate.currencies.push(action.payload)\n\t\t\t\t\tif (state.currencies.length === Types.currencies.length) {\n\t\t\t\t\t\tstate.loading = false\n\t\t\t\t\t\t// set coefficient and calculate on straight way\n\t\t\t\t\t\tstate.coefficient = Tools.setCoefficient(\n\t\t\t\t\t\t\tstate.currencies,\n\t\t\t\t\t\t\tstate.in,\n\t\t\t\t\t\t\tstate.out\n\t\t\t\t\t\t)\n\t\t\t\t\t\tstate.outValue = Tools.calculate(\n\t\t\t\t\t\t\tstate.coefficient,\n\t\t\t\t\t\t\tstate.inValue,\n\t\t\t\t\t\t\tstate.outValue\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t},\n})\n\nexport const {\n\tchangeInCur,\n\tchangeOutCur,\n\tchangeInValue,\n\tchangeOutValue,\n\tsetCoefficient,\n\tcalculateStraight,\n\tcalculateReverse,\n} = currencies.actions\nexport default currencies.reducer\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}