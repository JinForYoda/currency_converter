{"ast":null,"code":"import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { Types } from './Types';\nexport let Tools;\n\n(function (_Tools) {\n  const getCurApiArr = _Tools.getCurApiArr = () => {\n    const apiArr = [];\n    Types.currencies.forEach(base_currency => {\n      const currencies = Types.currencies.filter(cur => cur !== base_currency).join('%2C');\n      apiArr.push(Types.API + `?apikey=${Types.API_KEY}&currencies=${currencies}&base_currency=${base_currency}`);\n    });\n    return apiArr;\n  };\n\n  const getHeaders = _Tools.getHeaders = () => {\n    const myHeaders = new Headers();\n    myHeaders.append('apikey', Types.API_KEY);\n    return myHeaders;\n  };\n\n  const getMainCurrencies = _Tools.getMainCurrencies = (currency, allCurrencies) => {\n    return allCurrencies.filter(cur => !Object.keys(cur.data).includes(Types.baseCurrency) || !Object.keys(cur.data).includes(currency)).map(cur => cur.data);\n  };\n\n  const setCoefficient = _Tools.setCoefficient = (currencies, inCur, outCur) => {\n    const currency = currencies.find(cur => !Object.keys(cur.data).includes(inCur));\n\n    if (currency) {\n      return currency.data[outCur].value;\n    }\n  };\n})(Tools || (Tools = {}));\n\nexport let Fetch;\n\n(function (_Fetch) {\n  const getCurrency = _Fetch.getCurrency = createAsyncThunk(Types.GET_CURRENCY, async api => {\n    const response = await fetch(api);\n    const currency = await response.json();\n    return currency;\n  });\n})(Fetch || (Fetch = {}));","map":{"version":3,"names":["createAsyncThunk","Types","getCurApiArr","apiArr","currencies","forEach","base_currency","filter","cur","join","push","API","API_KEY","getHeaders","myHeaders","Headers","append","getMainCurrencies","currency","allCurrencies","Object","keys","data","includes","baseCurrency","map","setCoefficient","inCur","outCur","find","value","Tools","getCurrency","GET_CURRENCY","api","response","fetch","json","Fetch"],"sources":["/Users/maxryaguzov/home_porjects/currency_converter/src/utils/Tools.ts"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { Types } from './Types'\n\nexport namespace Tools {\n\texport const getCurApiArr = (): string[] => {\n\t\tconst apiArr: string[] = []\n\t\tTypes.currencies.forEach((base_currency) => {\n\t\t\tconst currencies = Types.currencies\n\t\t\t\t.filter((cur) => cur !== base_currency)\n\t\t\t\t.join('%2C')\n\t\t\tapiArr.push(\n\t\t\t\tTypes.API +\n\t\t\t\t\t`?apikey=${Types.API_KEY}&currencies=${currencies}&base_currency=${base_currency}`\n\t\t\t)\n\t\t})\n\t\treturn apiArr\n\t}\n\n\texport const getHeaders = (): Headers => {\n\t\tconst myHeaders = new Headers()\n\t\tmyHeaders.append('apikey', Types.API_KEY)\n\t\treturn myHeaders\n\t}\n\n\texport const getMainCurrencies = (\n\t\tcurrency: string,\n\t\tallCurrencies: Types.Currencies\n\t): Types.Currency['data'][] => {\n\t\treturn allCurrencies\n\t\t\t.filter(\n\t\t\t\t(cur) =>\n\t\t\t\t\t!Object.keys(cur.data).includes(Types.baseCurrency) ||\n\t\t\t\t\t!Object.keys(cur.data).includes(currency)\n\t\t\t)\n\t\t\t.map((cur) => cur.data)\n\t}\n\n\texport const setCoefficient = (\n\t\tcurrencies: Types.Currencies,\n\t\tinCur: Types.AvailableCurrencies,\n\t\toutCur: Types.AvailableCurrencies\n\t): number => {\n\t\tconst currency = currencies.find(\n\t\t\t(cur) => !Object.keys(cur.data).includes(inCur)\n\t\t)\n\t\tif (currency) {\n\t\t\treturn currency.data[outCur].value\n\t\t}\n\t}\n}\n\nexport namespace Fetch {\n\t/*\n        GET CURRENCY\n    */\n\texport const getCurrency = createAsyncThunk(\n\t\tTypes.GET_CURRENCY,\n\t\tasync (api: string) => {\n\t\t\tconst response = await fetch(api)\n\t\t\tconst currency: Types.Currency = await response.json()\n\t\t\treturn currency\n\t\t}\n\t)\n}\n"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,kBAAjC;AACA,SAASC,KAAT,QAAsB,SAAtB;AAEA;;;EACQ,MAAMC,YAAY,yBAAG,MAAgB;IAC3C,MAAMC,MAAgB,GAAG,EAAzB;IACAF,KAAK,CAACG,UAAN,CAAiBC,OAAjB,CAA0BC,aAAD,IAAmB;MAC3C,MAAMF,UAAU,GAAGH,KAAK,CAACG,UAAN,CACjBG,MADiB,CACTC,GAAD,IAASA,GAAG,KAAKF,aADP,EAEjBG,IAFiB,CAEZ,KAFY,CAAnB;MAGAN,MAAM,CAACO,IAAP,CACCT,KAAK,CAACU,GAAN,GACE,WAAUV,KAAK,CAACW,OAAQ,eAAcR,UAAW,kBAAiBE,aAAc,EAFnF;IAIA,CARD;IASA,OAAOH,MAAP;EACA,CAZM;;EAcA,MAAMU,UAAU,uBAAG,MAAe;IACxC,MAAMC,SAAS,GAAG,IAAIC,OAAJ,EAAlB;IACAD,SAAS,CAACE,MAAV,CAAiB,QAAjB,EAA2Bf,KAAK,CAACW,OAAjC;IACA,OAAOE,SAAP;EACA,CAJM;;EAMA,MAAMG,iBAAiB,8BAAG,CAChCC,QADgC,EAEhCC,aAFgC,KAGF;IAC9B,OAAOA,aAAa,CAClBZ,MADK,CAEJC,GAAD,IACC,CAACY,MAAM,CAACC,IAAP,CAAYb,GAAG,CAACc,IAAhB,EAAsBC,QAAtB,CAA+BtB,KAAK,CAACuB,YAArC,CAAD,IACA,CAACJ,MAAM,CAACC,IAAP,CAAYb,GAAG,CAACc,IAAhB,EAAsBC,QAAtB,CAA+BL,QAA/B,CAJG,EAMLO,GANK,CAMAjB,GAAD,IAASA,GAAG,CAACc,IANZ,CAAP;EAOA,CAXM;;EAaA,MAAMI,cAAc,2BAAG,CAC7BtB,UAD6B,EAE7BuB,KAF6B,EAG7BC,MAH6B,KAIjB;IACZ,MAAMV,QAAQ,GAAGd,UAAU,CAACyB,IAAX,CACfrB,GAAD,IAAS,CAACY,MAAM,CAACC,IAAP,CAAYb,GAAG,CAACc,IAAhB,EAAsBC,QAAtB,CAA+BI,KAA/B,CADM,CAAjB;;IAGA,IAAIT,QAAJ,EAAc;MACb,OAAOA,QAAQ,CAACI,IAAT,CAAcM,MAAd,EAAsBE,KAA7B;IACA;EACD,CAXM;GAlCSC,K,KAAAA,K;;AAgDjB;;;EAIQ,MAAMC,WAAW,wBAAGhC,gBAAgB,CAC1CC,KAAK,CAACgC,YADoC,EAE1C,MAAOC,GAAP,IAAuB;IACtB,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA5B;IACA,MAAMhB,QAAwB,GAAG,MAAMiB,QAAQ,CAACE,IAAT,EAAvC;IACA,OAAOnB,QAAP;EACA,CANyC,CAApC;GAJSoB,K,KAAAA,K"},"metadata":{},"sourceType":"module"}